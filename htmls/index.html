<!DOCTYPE html>
<html lang="en">
<head>
  <!-- PWA Manifest -->
  <link rel="manifest" href="../manifest.json" />
  <meta name="theme-color" content="#4B4E6D" />

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Page Title -->
  <title>Persian Music Scales</title>

  <!-- Description for SEO -->
  <meta name="description" content="Explore Persian Music Scales with interactive features. Learn about microtones and traditional music scales." />

  <!-- Open Graph Metadata for Link Sharing -->
  <meta property="og:title" content="Persian Music Scale App" />
  <meta property="og:description" content="Persian Music Education ‚Äì Scales, Microtones, and Innovation at Your Fingertips" />
  <meta property="og:url" content="https://persianmusicscales.github.io/Persian-Music-Scales-App/" />
  <meta property="og:type" content="website" />

  <!-- Link to External CSS -->
  <link rel="stylesheet" href="csss/indexstyle.css" />
</head>
<body>
  <!-- HEADER -->
  <header>
    <h1 id="pageTitle">Persian Music Scales</h1>
    <!-- Language Selector positioned at top right -->
    <select id="languageSelector" class="language-selector" aria-label="Select Language">
      <option value="en">en</option>
      <option value="fr">fr</option>
      <option value="fa">ŸÅÿß</option>
    </select>
  </header>

  <!-- SCALE CONTROLS BELOW HEADER -->
  <div class="scale-controls">
    <select id="scaleSelector" aria-label="Select Scale">
      <option value="Shur">Shur</option>
      <option value="nava">Nava</option>
      <option value="segah">Segah</option>
      <option value="homayoun">Homayoun</option>
      <option value="esfahan">Esfahan</option>
      <option value="chahargah">Chahargah</option>
      <option value="mahur">Mahur / Rast Panjgah</option>
    </select>
    
    <!-- Avazha Floating Icon -->
    <div id="avazhaContainer" class="avazha-container">
      <button id="avazhaButton" class="avazha-button">
        <span id="avazhaLabel">Avazha</span>
      </button>
      <!-- Expandable Columns -->
      <div id="avazhaColumns" class="avazha-columns hidden">
        <div class="avazha-column">
          <div class="avazha-item" data-translate="avazha.abuAta">Abu Ata</div>
          <div class="avazha-item" data-translate="avazha.bayatTork">Bayat Tork</div>
          <div class="avazha-item" data-translate="avazha.afshari">Afshari</div>
          <div class="avazha-item" data-translate="avazha.dashti">Dashti</div>
        </div>
        <div class="avazha-column" id="avazhaDynamicColumn">
          <!-- Dynamic labels will be inserted here via JavaScript -->
        </div>
      </div>
    </div>
    
    <!-- Dynamic Label -->
    <span id="labelAtZeroAngle"></span>
  </div>

  <!-- MAIN: Center the circle, place legend/footer inside -->
  <main>
    <!-- Circle container -->
    <div class="container" id="circleContainer">
      <div class="diatonic-scale" id="diatonicScale"></div>
      <div class="outer-scale" id="outerScale"></div>
    </div>

    <!-- Play Scale Button Container -->
    <div class="play-button-container">
      <button id="playScale">‚ñ∫ Play Scale</button>
    </div>
     
    <!-- Add to Home Screen Button -->
    <button id="add-to-home">Install App</button>
    
    <!-- My App Button -->
    <div class="my-app-container" id="myAppContainer">
      <button id="myAppButton" class="my-app-button">
        <div class="my-app-icon">
          <!-- Insert Your SVG Icon Here -->
          <img src="assets/icons/myapp_icon.svg" alt="My App Icon">
        </div>
      </button>
      <!-- Bounded Text Label for My App Button -->
      <span class="my-app-label" data-translate="myAppLabel">App</span>
    </div>

    <!-- Legend at bottom-left, above bottom nav -->
    <div class="legend">
      <div class="legend-row">
        <div class="legend-item">
          <span class="color-box" style="background: gray;"></span>
          200 cents
        </div>
        <div class="legend-item">
          <span class="color-box" style="background: black;"></span>
          100 cents
        </div>
      </div>
      <div class="legend-row">
        <div class="legend-item">
          <span class="color-box" style="background: pink;"></span>
          150 cents
        </div>
        <div class="legend-item">
          <span class="color-box" style="background: green;"></span>
          250 cents
        </div>
      </div>
    </div>

    <!-- Footer at bottom-right, above bottom nav -->
    <footer>
      Copyright ¬© 2024
      <br/>
      Pouya Hosseini
    </footer>
  </main>

  <!-- Bottom Menu (fixed) -->
  <nav class="bottom-nav">
    <a href="index.html">
      <div class="nav-icon">üéº</div>
      <span data-translate="bottomNav.scales">Scales</span>
    </a>
    <a href="tuner.html">
      <div class="nav-icon">üéπ</div>
      <span data-translate="bottomNav.tuner">Tuner</span>
    </a>
    <a href="guide.html">
      <div class="nav-icon">üìñ</div>
      <span data-translate="bottomNav.guide">Guide</span>
    </a>
    <a href="about.html">
      <div class="nav-icon">‚ÑπÔ∏è</div>
      <span data-translate="bottomNav.about">About</span>
    </a>
  </nav>

  <!-- Pop-up Modal for My App Installation Instructions -->
  <div class="popup-overlay" id="installPopup">
    <div class="popup-modal">
      <div class="popup-header">
        <div class="popup-title" id="popupTitle">Install The App</div>
        <button class="popup-close" id="closePopup">&times;</button>
      </div>
      <div class="popup-content" id="popupContent">
        <div class="popup-instruction">
          <!-- Share Icon SVG -->
          <img src="assets/icons/share.svg" alt="Share Icon">
          <span id="instructionShare">Tap the Share Button</span>
        </div>
        <div class="popup-instruction">
          <!-- Add to Home Screen Icon SVG -->
          <img src="assets/icons/add_home.svg" alt="Add to Home Screen Icon">
          <span id="instructionAdd">Add to Home Screen</span>
        </div>
      </div>
      <button class="popup-button" id="dismissPopup">Understand</button>
    </div>
  </div>

  <!-- Scripts moved to external file(s) -->
  <script src="src/index.js"></script>
</body>
</html>
